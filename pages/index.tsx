import type { NextPage } from "next";
import Head from "next/head";
import styles from "@styles/Home.module.css";
import React, { useEffect, useState } from "react";
import Banner from "@components/Banner";
import ProgramList from "@components/ProgramList";
import { API } from "@src/API";
import { Box, Container, Button } from "@mui/material";
import MapContainer from "@components/MapContainer";
import styled from "@emotion/styled";
import MainMapContainer from "@components/main/MainMapContainer";
import MainEditorPickContainer from "@components/main/MainEditorPickContainer";
import MainThemeContainer from "@components/main/MainThemeContainer";
import MainSearchContaier from "@components/main/MainSearchContainer";

const Home: NextPage = () => {
  const [isLoading, setLoading] = useState(false);
  const [travels, setTravels] = useState([]);
  const [sortedType, setSortedType] = useState(0);

  const getTravel = async () => {
    const { data } = await API.get("/main/travelBoards", {
      data: JSON.stringify({
        id: "admin",
      }),
    });
    setTravels(data);
    setLoading(false);
  };

  useEffect(() => {
    getTravel();
  }, []);

  return (
    <div className={styles.container}>
      <Head>
        <title>FollowMe</title>
        <meta name="description" content="Generated by create next app" />
      </Head>
      {isLoading ? (
        <></>
      ) : (
        <Container>
          <MainSearchContaier />
          <MainEditorPickContainer />

          <ProgramList programs={travels} />
          <Banner />
          <MainThemeContainer />
          <MainMapContainer />
        </Container>
      )}
    </div>
  );
};

// export async function getServerSideProps() {
//   const { data } = await API.get(process.env.API_URL + "/main/swipers", {});

//   return {
//     props: {
//       data,
//     },
//   };
// }

export default Home;
